var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(t){return t.raw=t};$jscomp.createTemplateTagFirstArgWithRaw=function(t,ba){t.raw=ba;return t};$w=$(window);$d=$(document);
(function(t,ba,L,X,fa){function Ea(){if(!qa||6E4<Date.now()-Fa)qa=Ua(32),Fa=Date.now();ua("doge",qa,1/24);return qa}function Ga(a){a.css({height:0});var c=parseInt(a.css("borderTopWidth"))+a[0].scrollHeight+parseInt(a.css("borderBottomWidth"));a.css({height:c})}function ma(a,c,d,k,q){c=c||100;q=Ha&&q;var n,v,r,C,H,w,N=function(){var J=Date.now();J-C<c&&(!k||J-H<k)&&!q?n=setTimeout(N,c-(J-C)):(n=null,d||(w=a.apply(r,v),r=v=null))};return function(){r=this;v=arguments;C=Date.now();H||(H=Date.now());
var J=d&&!n;n||(n=q?Ha(N):setTimeout(N,c));J&&(w=a.apply(r,v),r=v=null);return w}}function va(a,c){c=c||150;return ma(a,c,!1,c)}function ca(a){a=a||t.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}function wa(){var a={};t.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,k){a[d]=k});return a}function Z(a){var c=this,d=a.fixed,k=a.pad||0,q=a.w?Math.min(a.w,L.width()-2*k):"auto",n=a.h||"auto",v=a.top||
0,r=a.opacity||60,C=a.iframe,H=!!a.full,w=a.img,N=$(".BOX").length,J=a.refocusOnExit,T=ba.activeElement;H&&(d=!0,q=n="100%");var U=$("<div/>",{"class":"mask-back",css:{opacity:r/100,zIndex:5999+N}});r={width:q,height:C?n+10:n,position:d?"fixed":"absolute",top:v,padding:k,zIndex:6E3+N};a.bg&&(r.background=a.bg);H&&(r.left=0);var E=$("<div/>",{"class":"BOX ",css:r}),u=function(){E.css({left:"50%",marginLeft:-E.width()/2-k})},x=function(){if(!H)if(u(),d)E.css({top:"50%",marginTop:-E.height()/2});else if(!v){var D=
E.height()>L.height()?10:0;E.css({top:L.scrollTop()+Math.max(L.height()/2-E.height()/2,D)})}};c.recenter=x;var A=function(D){27===D.which&&B()},B=c.hide=function(D){a.onclose&&!0!==D&&!1===a.onclose(c)||(J&&T.focus(),U.remove(),E.remove(),L.off("resize",u),X.off("keyup",A))};c.size=function(D,P,R){E.width(q=D).height(n=P);R&&x()};c.el=function(){return E};C=C?"<iframe width="+q+" height="+n+' frameborder=0 src="'+C+'"></iframe>':"";w&&(w=$('<img style="vertical-align:top;" src="'+w+'"/>'),r=function(){x();
E.show();var D=w[0].height/w[0].width;q="auto"===q?Math.min(w[0].width,L.width()-2*k):q;n=q*D;w.css({width:q,height:n})},w.load(r),w[0].complete&&r());E.html(w||C||a.html);a.hideX||E.append($(X_SVG).click(B));a.noMaskClick||(U.click(B),X.on("keyup",A));$("body").append(U).append(E);w||(x(),E.show());a.onopen&&a.onopen();L.on("resize",u)}function ia(){return I.user&&I.user.id}function Ia(a){G("Logging in");var c=$("#login-form");$.ajax({url:"/ajax_login",type:"post",dataType:"json",data:{email:c.find(".login-email").val(),
pass:c.find(".login-pass").val(),stay_logged:c.find(".login-stay-logged").hasClass("checked")?1:0},success:function(d){d.error?(G(!1),error_dialog(d.error)):(t.I=d.js_data,a?a():t.location.reload())}})}function Va(){G("Logging out");$.ajax({url:"/ajax_logout",type:"post",dataType:"json",success:function(a){a.error?error_dialog(a.error):t.location.reload()}})}function Ja(a){if(Ka()){G("Signing up");var c=$("#signup-form");$.ajax({url:"/ajax_signup",type:"post",dataType:"json",data:{user:c.find(".login-user").val(),
email:c.find(".login-email").val(),pass:c.find(".login-pass").val(),stay_logged:c.find(".login-stay-logged").hasClass("checked")?1:0,"cf-turnstile-response":c.find('input[name="cf-turnstile-response"]').val()},success:function(d){d.error?(G(!1),error_dialog(d.error)):d.errors?(G(!1),$("#signup-box .login-msg").html("<li>"+d.errors.join("</li><li>")+"</li>")):(t.I=d.js_data,a?a():t.location.reload())}})}}function Ka(){var a=$("#signup-form"),c=a.find(".login-user").val(),d=a.find(".login-email").val(),
k=a.find(".login-pass").val(),q=a.find(".login-pass-again").val(),n=[];""!==c&&""!==d&&""!==k&&""!==q||n.push("Fill in all fields!");k!==q&&n.push("Password mismatch, try again");-1!==c.search(" ")&&n.push("Username cannot contain spaces! Try dash or underscore.");8>k.length&&n.push("Password must be at least 8 characters");a.find(".signup-accept-terms").hasClass("checked")||n.push("Please accept the Imgflip terms and privacy policy");a.find('input[name="cf-turnstile-response"]').val()||n.push("Please verify you are not a robot using the Cloudflare captcha box");
return n.length?(a=$("#signup-box .login-msg"),a.html("<li>"+n.join("</li><li>")+"</li>"),a[0].scrollIntoView&&a[0].scrollIntoView(),!1):!0}function aa(a,c,d,k){var q=decodeURIComponent((ba.cookie.split("rootemail=")[1]||"").split(";")[0]),n=$("body").hasClass("darkmode");a='<div id="login-wrap">'+(a?'<div class="login-title msg msg-white">'+esc(a)+"</div>":"")+'<div id="login-box" class="login-box'+(k?" display-none":"")+'"><h2>Log In</h2><div class="login-pre-msg">Don\'t have an account? <span class="a">Sign Up</span></div><div class="login-msg"></div><button type="button" class="google-login-btn loading"><span class="google-login-logo"><span style="width:18px;height:18px;"><svg width="18px" height="18px" viewBox="0 0 48 48"><g><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></g></svg></span></span><span class="google-login-text">Log in with Google</span><span class="google-login-loading load"></span></button><div class="login-or">- or -</div><form id="login-form" method="post"><div class="login-label">Email or Username</div><input class="login-email" type="text" autocomplete="email" value="'+
esc(q)+'"/><div class="login-label">Password <a class="login-forgot-link" href="/forgot" tabindex="-1">forgot?</a></div><input class="login-pass" type="password"/>'+xa("Stay Logged In",!0,{className:"login-stay-logged"})+'<button type="button" class="b but lrg login-btn">Login</button></form></div><div id="signup-box" class="login-box'+(k?"":" display-none")+'"><h2>Sign Up for Imgflip</h2><div class="login-pre-msg">Have an account already? <span class="a">Log In</span></div><div class="login-msg"></div><button type="button" class="google-login-btn loading"><span class="google-login-logo"><span style="width:18px;height:18px;"><svg width="18px" height="18px" viewBox="0 0 48 48"><g><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></g></svg></span></span><span class="google-login-text">Log in with Google</span><span class="google-login-loading load"></span></button><div class="login-or">- or -</div><form id="signup-form" method="post"><div class="login-label">Email</div><input class="login-email" type="email" autocomplete="email"/><div class="login-label">Username</div><input class="login-user" type="text" maxlength="32"/><div class="login-label">Password</div><input class="login-pass" type="password"/><div class="login-label">Password again</div><input class="login-pass-again" type="password"/>'+
xa("Stay Logged In",!0,{className:"login-stay-logged"})+xa('I agree to Imgflip <a href="/terms" target="_blank">terms</a> & <a href="/privacy" target="_blank">privacy</a>',!1,{className:"signup-accept-terms"})+'<div class="cf-turnstile" data-sitekey="0x4AAAAAAAOlOX2XHH4zn6nY" data-theme="'+(n?"dark":"light")+'"></div><button type="button" class="b but lrg login-btn">Sign Up</button></form></div></div>';var v=new Z($.extend(c||{},{html:a,bg:"transparent"}));$.getScript("https://apis.google.com/js/platform.js?onload=googleAuthInit");
var r=function(){t.turnstile?t.turnstile.render("#signup-form .cf-turnstile",{sitekey:$(".cf-turnstile").data("sitekey")}):$.getScript("https://challenges.cloudflare.com/turnstile/v0/api.js")};k&&r();ja=function(){d?(G(!1),v.hide(),initData(!0),d()):t.location.reload()};c=v.el();c.on("click",".login-pre-msg .a",function(){var C=$(this).closest(".login-box"),H=C.siblings(".login-box");C.addClass("display-none");H.removeClass("display-none");H.is("#signup-box")&&r();v.recenter()});c.on("click","#login-form .login-btn",
function(){Ia(ja)});c.on("click","#signup-form .login-btn",function(){Ja(ja)});c.on("keydown","#login-form input",function(C){13===C.which&&Ia(ja)});c.on("keydown","#signup-form input",function(C){13===C.which&&Ja(ja)});$("#login-wrap .google-login-btn").focus()}function Wa(a){a=a.getAuthResponse(!0);G("Logging in");var c=wa();$.ajax({type:"POST",url:"/ajax_google_login",data:{id_token:a.id_token},dataType:"json",success:function(d){d.error?(G(!1),error_dialog(d.error)):(t.I=d.js_data,c.claim_iid?
t.location="/i/"+(~~c.claim_iid).toString(36)+"?herp="+Date.now():ja?ja():t.location.reload())}})}function ya(){var a=$("#nt-count"),c=+a.text(),d=$("#nt-nots-mini");d.hide();d=d.find(".nt-new");d.each(function(){c-=$(this).data("unread_count")||1});d.removeClass("nt-new");a.text(c);1>c&&a.removeClass("has-nots");X.off("click",ya)}function Xa(a){ca(a);var c=$("#nt-nots-mini");if("none"===c.css("display")){c.show();if(!c.html()){c.append('<div class="nt-header">Notifications<a href="/notifications" class="l but sml">View All</a></div>');
var d=$('<div class="load"/>');c.append(d);$.ajax({url:"/ajax_get_nots",data:{limit:5},dataType:"json",success:function(k){d.remove();k.error?error_dialog(k.error):($("#nt-count").text(k.count).toggleClass("has-nots",0<k.count),c.append(k.html))}});c.click(function(k){k.stopPropagation()})}X.on("click",ya)}else ya()}function La(a,c,d,k){$.ajax({url:"/ajax_com_delete",type:"post",dataType:"json",data:$.extend(c||{},{cid:a}),success:function(q){q.error?error_dialog(q.error):(q.longer_ban_expires&&DLG("User Already Banned for Longer",
"Ban expires in "+q.longer_ban_expires),d&&d())},complete:function(){k&&k()}})}function Ya(){var a=$(this),c=a.closest(".com").attr("id").substr(3);confirm("Are you sure you want to flag this comment for violating the Imgflip Terms of Use? If you disagree with someone but they are not breaking the rules, use the downvote button!")&&(G("Flagging comment"),$.ajax({url:"/ajax_com_flag",type:"post",data:{cid:c},dataType:"json",success:function(d){G(!1);d.error?error_dialog(d.error):(MSG("Flag submitted successfully!",
"green"),a.remove())}}))}function Za(){if(!I.done)return ka();if(ia())if(I.user.email_verified||da()){var a=$(this).closest(".com"),c=a.find(".c-new-wrap");c[0]?c.find(".c-new-text").val()||c.remove():(c=$("#c-new-main").clone(),c.attr("id",""),a.append(c),c.find(".c-new-text").focus())}else ra();else aa()}function $a(a){if(!I.done)return ka();if(ia())if(I.user.email_verified||da()){var c=new Z({html:'<div class="c-add-img-popup"><div class="c-add-img-msg">Paste any Imgflip image url, page url, or filename</div><input class="c-add-img-input" type="text" placeholder="https://imgflip.com/gif/3g7dh8"/><div class="c-add-img-preview-label display-none">Preview:</div><button type="button" class="c-add-img-submit-btn l but display-none">Insert Image</button></div>'}),
d=c.el(),k;d.on("paste change",".c-add-img-input",ma(function(){var q=$(this).val();q!==k&&(k=q,$.ajax({url:"/ajax_check_img_url",dataType:"json",data:{url:$(this).val()},success:function(n){n.error?error_dialog(n.error):(d.find("img").remove(),d.find(".c-add-img-submit-btn").before('<img src="'+n.url+'"/>'),d.find(".c-add-img-preview-label,.c-add-img-submit-btn").removeClass("display-none"))}}))},200));d.on("click",".c-add-img-submit-btn",function(){var q=d.find("img").attr("src");if(q){var n=a.val();
a.val(n+(n?" ":"")+q);c.hide()}else MSG("No valid image selected","red")})}else ra();else aa()}function ra(){DLG("Email Verification Required",'To leave a comment, your email address must be verified (Pro accounts and Google Login are auto-verified). If you are a new user, just check your email and find the "Verify your Imgflip email" message. Otherwise, you can either log in with Google, subscribe to Imgflip Pro, or re-send the verification email using the button in your <a href="/settings">Imgflip settings</a>.')}
function Ma(a,c){var d=!a.hasClass("set"),k=$(c)[0];k&&(k.muted=!d,a.toggleClass("set",d))}function za(a,c,d){if(!I.done)return ka();if(!ia())aa();else if(a){var k=$(d);d=k.find(".img-up");k=k.find(".img-down");var q=d.hasClass("set"),n=k.hasClass("set"),v=-1;d.add(k).removeClass("set");c||n?c&&!q&&(d.addClass("set"),v=1):(k.addClass("set"),v=0);$.ajax({url:"/ajax_vote",type:"post",dataType:"json",data:{new_vote:v,iid:a},success:function(r){r.error&&error_dialog(r.error)}})}}function ab(){if(!I.done)return ka();
if(ia()){var a=$(this),c=a.closest(".com").attr("id").substr(3)>>0,d="#com"+c,k=a.hasClass("set"),q=a.hasClass("c-up"),n=0;q?n=k?-1:1:!k&&$(d+" .c-up").hasClass("set")&&(n=-1);d=$(d+" .c-points").first();n=parseInt(d.text())+n;d.text(n+(1===n?" up":" ups"));a.parent().find(".set").removeClass("set");k||a.addClass("set");$.ajax({url:"/ajax_comment_vote",type:"post",dataType:"json",data:{new_vote:k?-1:q?1:0,cid:c},success:function(v){v.error&&error_dialog(v.error)}})}else aa()}function Aa(a,c){if(a&&
!Ba){var d=c.data("meme-iid")>>0,k=c.find(".c-new-text").val()||"",q=c.closest(".com"),n=(q.attr("id")||"").substr(3)||0,v="";d||k||(v+="<li>Enter some text</li>");""!==v?error_dialog(v):(Ba=!0,G("Adding comment"),$.ajax({url:"/ajax_add_comment",type:"post",dataType:"json",data:{text:k,iid:a,comImage:d,parent_id:n,level:n?~~q.data("l")+1:0},success:function(r){if(r.error)error_dialog(r.error);else{for(var C=$(r.com_html),H=0;H<r.gif_video_iids.length;H++)t.gifVideoIids.push(r.gif_video_iids[H]);n?
(c.remove(),q.after(C)):(c.find(".c-new-text").val(""),d&&c.removeClass("has-pending-img").data("meme-iid",null).find(".c-pending-img").remove(),r=$("#img-coms"),r.append(C),r=r.offset().top+r.innerHeight()-(L.scrollTop()+L.height()),0<r&&$("html,body").animate({scrollTop:"+="+(r+150)}));Ca(C);ha(C)}},complete:function(){G(!1);Ba=!1}}))}}function ha(a){$(a||".com").quickEach(function(){var c=this.find(".c-text")[0].scrollHeight;252<c&&!this.data("has_show_full")?(this.find(".c-right").append('<button type="button" class="c-show-full-btn l but">Show Full Comment</button>'),
this.data("has_show_full",!0)):252>=c&&this.data("has_show_full")&&(this.find(".c-show-full-btn").remove(),this.data("has_show_full",!1))})}function Ca(a){var c=I.user;if(c.id){var d,k,q;$(a||".com").quickEach(function(){d=this.attr("id").substr(3);var n=I.com_votes[d];if(n){k="1"===n?".c-up":".c-down";this.find(k).addClass("set");var v=this.find(".c-points");"1"===n&&"0 ups"===v.text()&&v.text("1 up")}n=this.data("uid");(3<=c.priv||c.id==n||-1!==img.stream_mod_uids.indexOf(c.id))&&!this.find(".c-delete")[0]&&
this.find(".c-title").before('<button type="button" class="c-delete a">delete</button>');q=this.find(".c-text");q.is(":empty")&&!q.data("text")||this.find(".c-title").before('<button type="button" class="c-flag a">flag</button>');if(I.blocked_cids&&I.blocked_cids[d]&&!this.hasClass("hidden")){this.addClass("hidden");n=~~this.data("l");for(v=this.next();~~v.data("l")>n;)v.addClass("child-of-bad"),v=v.next();this.prepend('<div class="bad-com"><span class="bad-com-btn">blocked comment (click to show)</span></div>')}})}}
function G(a){!1===a?(na&&na.remove(),sa=na=!1):(na||(na=$('<div id="site-loading"><div id="site-loading-inner"><div class="load"></div><div id="site-loading-msg"></div><div id="site-loading-bar"><div id="site-loading-progress"></div></div></div></div>'),$("body").append(na)),$("#site-loading-msg").html(a||"Loading"))}function bb(){var a=$(this).data("iid");BOX.show({html:'<div class="img-flag-popup" data-iid="'+a+'"><div class="img-flag-title">Flag Image</div><div class="img-flag-label">Reason:</div><div class="select img-flag-select-wrap"><select class="img-flag-select"><option value></option><option value="img-nsfw">NSFW (adult/mature content)</option><option value="img-flag-wrong-stream">Wrong Stream (violates stream posting rules)</option><option value="img-spam">Spam (advertising, website spam, etc)</option><option value="img-abuse">Abuse (anything breaching our Terms of Service)</option></select></div><div class="img-flag-label">Additional Comments [optional]</div><textarea class="img-flag-text" maxlength="200"></textarea><button type="button" class="img-flag-submit b but">Submit</button><button type="button" class="img-flag-cancel l but">Cancel</button></div>'})}
function cb(){BOX.hide()}function db(){var a=$(this).closest(".img-flag-popup"),c=a.data("iid"),d=a.find(".img-flag-select").val();a=a.find(".img-flag-text").val();d?(G(),$.ajax({url:"/ajax_flag",type:"post",dataType:"json",data:{iid:c,type:d,text:a},success:function(k){G(!1);BOX.hide();$('.img-flag-btn[data-iid="'+c+'"]').remove();k.error?MSG(k.error,"red"):MSG(k.message,"green")}})):MSG("Select a reason","red")}function Na(a){var c=wa().stream||"";t.streamIsPrivate?Oa(a,c):(G(),$.get("/ajax_submit_popup",
{iid:a,stream:c},function(d){G(!1);if("object"===typeof d&&d.error)error_dialog(d.error);else{var k=new Z({html:d});$("#submit-submit").click(function(){$("#submit-certify").hasClass("checked")?Oa(a,$(".submit-stream-wrap .i-select-btn").data("value"),function(){k.hide()},{title:$("#submit-title").val(),tags:$("#submit-tags").val(),nsfw:$("#submit-nsfw").hasClass("checked")?1:0}):error_dialog("To submit your image you must certify its integrity by checking the box")});$("#submit-cancel").click(function(){k.hide()});
var q=function(n,v){var r=n.closest(".i-select-wrap").find(".i-select-btn");r.text(n.data("value")).data("value",n.data("value"));v&&r.click();$("#submit-stream-anon-msg").toggle(!!n.data("no_anon"));$("#submit-stream-description").text(n.data("description"));$(".submit-rule-fun").toggle("fun"===n.data("value"));$(".submit-rule-featured").toggle(!!n.data("featured"));r=n.data("rules")||[];for(var C="",H=0;H<r.length;H++)C+='<div class="submit-rule">',C+='<div class="submit-rule-title">'+esc(r[H].title)+
"</div>",C+='<div class="submit-rule-details">'+esc(r[H].description)+"</div>",C+="</div>";$("#submit-stream-rules").html(C)};$(".submit-stream-wrap").on("click",".i-select-link",function(){q($(this),!0)});q($(".submit-stream-wrap .i-select-link:first"));$("#submit-details-btn").click(function(){var n=$(".submit-rule");n.toggleClass("submit-rule-open",!n.eq(0).hasClass("submit-rule-open"))});$("#submit-guide").on("click",".submit-rule-title",function(){$(this).closest(".submit-rule").toggleClass("submit-rule-open")})}}))}
function Oa(a,c,d,k){BOX.hide();G("Submitting image");$.ajax({url:"/ajax_submit_creation",type:"post",dataType:"json",data:$.extend({iid:a,stream:c,pathname:location.pathname},k||{}),success:function(q){G(!1);q.error?error_dialog(q.error):(BOX.show({html:"<h2>Image submitted successfully!</h2><p>"+q.msg_html+"</p>",w:400,pad:20}),d&&d())}})}function eb(a){var c=a.siblings(".i-select-link"),d=a.data("latest_query")||"",k=a.val().toLowerCase().replace(/\s+/g," ");if(k!==d){a.data("latest_query",k);
var q=0;c.quickEach(function(){var n=this.data("normalized_name");n||(n=this.attr("data-value").toLowerCase().replace(/\s+/g," "),this.data("normalized_name",n));this.toggleClass("display-none",k&&(-1===n.indexOf(k)||10<++q)||!k&&!this.data("initial"))})}}function Pa(a,c,d){d=Math.ceil(a.measureText(d).width)+8;c=a.getImageData(0,c-16,d,16).data;for(var k=0,q=0,n=0,v=a=0;200>v;v++){var r=(16*Math.random()>>0)*d+(Math.random()*d>>0);k+=(c[4*r]-k)/(v+1);q+=(c[4*r+1]-q)/(v+1);n+=(c[4*r+2]-n)/(v+1);a+=
(Math.abs(c[4*r]-k)-a)/(v+1)/3;a+=(Math.abs(c[4*r+1]-q)-a)/(v+1)/3;a+=(Math.abs(c[4*r+2]-n)-a)/(v+1)/3}return 50>a?(d=Math.round(.299*k+.587*q+.114*n),d=Math.min(255,d+(127<d?-(70+a):110+a)),"rgb("+d+","+d+","+d+")"):""}t.ROTATE_SVG='<svg x="0px" y="0px" width="50px" height="50px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path d="M41.038,24.1l-7.152,9.342L26.734,24.1H31.4c-0.452-4.397-4.179-7.842-8.696-7.842c-4.82,0-8.742,3.922-8.742,8.742 s3.922,8.742,8.742,8.742c1.381,0,2.5,1.119,2.5,2.5s-1.119,2.5-2.5,2.5c-7.576,0-13.742-6.165-13.742-13.742 s6.166-13.742,13.742-13.742c7.274,0,13.23,5.686,13.697,12.842H41.038z"/></svg>';
t.X_SVG='<svg class="x-svg" viewBox="0 0 10 10"><path d="M3,3l4,4"/><path d="M3,7l4,-4"/></svg>';t.BACK_SVG='<svg class="back-svg" viewBox="0 0 100 100"><path d="M60 30l-20 20l20 20"/></svg>';t.NEXT_SVG='<svg class="next-svg" viewBox="0 0 100 100"><path d="M40 30l20 20l-20 20"/></svg>';var Da;t.isAndroidApp=function(){Da===fa&&(Da="undefined"!==typeof t.matchMedia&&t.matchMedia("(display-mode: standalone)").matches&&-1!==navigator.userAgent.toLowerCase().indexOf("android"));return Da};I=t.I||{user:{}};
var Qa={};t.onerror=function(a,c,d,k,q){if("Script error."!==a&&"Script error"!==a||c&&0!==d){var n=a+c+d+"|"+k;Qa[n]||(Qa[n]=!0,a={msg:a,file:c,line:d,col:k||"",stack:q?q.stack:""},100<=Ra||(Ra++,$.ajax({url:"/ajax_log_js_error",type:"post",data:{url:t.location.href,data:a}})))}};var Ra=0;t.ilog=function(a,c){$.ajax({url:"/ajax_log",type:"post",data:{url:t.location.href,type:a,data:c}})};$.ajaxSetup({cache:!0});$d.ajaxError(function(a,c,d,k){"/"===d.url[0]&&"/ajax_get_le_data"!==d.url&&(d.error||
fb())});var fb=t.handleRequestError=function(){G(!1);error_dialog("Request error. Try again in a minute. If this keeps happening, and other websites (e.g. google.com) still load fine, let us know with the Feedback button!")},qa,Fa=0,gb=$.ajax;$.ajax=function(a){if(a.type&&"post"===a.type.toLowerCase()){a.data=a.data||{};var c=Ea();t.FormData&&a.data instanceof FormData?(a.data.append("__tok",c),a.data.append("__cookie_enabled",navigator.cookieEnabled?1:0)):(a.data.__tok=c,a.data.__cookie_enabled=
navigator.cookieEnabled?1:0)}return gb(a)};$d.on("submit","form",function(){var a=$(this);if("post"===a.attr("method")){var c=a.find("input[name=__tok]");c[0]||(c=$('<input type="hidden" name="__tok"/>'),a.append(c));c.val(Ea())}});var ka=t.notLoadedError=function(){error_dialog("Cannot perform this action until page has finished loading. Wait a few seconds or try refreshing.")};$d.on("input focus","textarea",function(a){Ga($(a.target))});L.on("resize",ma(function(){$("textarea").each(function(){Ga($(this))})}));
$d.on("submit","form",function(){$(this).find(".check-wrap").each(function(){var a=$(this),c=a.hasClass("checked"),d=a.find("input");d[0]||(d=$('<input type="hidden"/>').appendTo(a));d.attr("name",a.data("name"));d.val(c?"on":"");d.prop("disabled",!c||a.hasClass("disabled"))})});$d.on("click",".check-wrap",function(){$(this).hasClass("radio")?($(this).siblings(".check-wrap.radio").removeClass("checked"),$(this).addClass("checked").change()):$(this).toggleClass("checked").change()});$.fn.quickEach=
function(){var a=jQuery([1]);return function(c){var d=-1,k,q=this.length;try{for(;++d<q&&(k=a[0]=this[d])&&!1!==c.call(a,d,k););}catch(n){throw delete a[0],n;}delete a[0];return this}}();var Ha=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame;t.debounce=ma;t.throttle=va;t.cancelEvent=ca;t.inherits=function(a,c){var d=function(){};d.prototype=c.prototype;a.prototype=new d;a.prototype.constructor=a};var hb={"&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};t.esc=function(a){return String(a).replace(/[&<>"'`=\/]/g,function(c){return hb[c]})};var Ua=t.randHash=function(a,c){c=c||64;for(var d="";0<a--;)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[Math.floor(Math.random()*c)];return d},xa=t.cb=function(a,c,d){c="check-wrap"+(c?" checked":"")+(d.className?" "+d.className:"");var k=d.id?' id="'+d.id+'"':"";d=d.title?' title="'+esc(d.title)+'"':"";return'<button type="button" class="'+
c+'"'+k+d+">\n\t\t\t\t\t"+ib("check")+'\n\t\t\t\t\t<span class="check-text">'+a+"</span>\n\t\t\t\t</button>"},la=t.radioBtn=function(a,c,d,k){c="check-wrap radio"+(c?" checked":"")+(d.className?" "+d.className:"");k=k?' data-value="'+esc(k)+'"':"";return'<button type="button" class="'+c+'"'+k+'><span class="check-text">'+a+"</span></button>"},jb=t.toggle=function(a,c,d){d='<div class="toggle'+(d?" "+d:"")+'">';for(var k in a)d+='<button type="button" class="toggle-opt'+(c===k?" selected":"")+'" data-value="'+
esc(k)+'">\n\t\t\t\t'+a[k]+"\n\t\t\t</button>";return d+"</div>"},ib=t.icon=function(a){switch(a){case "check":return'<svg viewBox="0 0 10 10"><path d="M2,5l2,3l4,-6"/></svg>';case "sparkle":return'<svg class="sparkle-svg" viewBox="0 0 24 24"><path d="m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"/></svg>'}return""};t.GET=wa;var ua=t.setCookie=
function(a,c,d){a=encodeURIComponent(a)+"="+encodeURIComponent(c||"")+"; path=/; secure";d&&(c=new Date,c.setTime(c.getTime()+864E5*d),a+="; expires="+c.toUTCString());ba.cookie=a},ta=t.getCookie=function(a){var c=ba.cookie.split(/;\s*/);a=encodeURIComponent(a);for(var d=0;d<c.length;d++){var k=c[d].split("=");if(k[0]===a)return decodeURIComponent(k[1]||"")}return null},da=t.proType=function(){return ta("pro_type")};t.getTestBoolean=function(a){var c=ta(a);"0"!==c&&"1"!==c&&(c=Math.round(Math.random())+
"",ua(a,c,30));return c};var oa;t.Box=Z;t.BOX={show:function(a){return oa=new Z(a)},hide:function(){oa&&oa.hide()},size:function(){oa&&oa.size()}};DLG=function(a,c){BOX.show({html:"<p><b>"+a+"</b></p><p>"+c+"</p>",w:400,pad:20})};error_dialog=function(a){DLG("Error",a)};MSG=function(){var a,c;return function(d,k,q){!1===d?a&&a.hide():(k=k||"white",q=q||5E3,a||(a=$('<div id="quick-msg">').appendTo("body")),a.attr("class","msg msg-"+k).html(d).css("margin-left","-50%").css({"margin-left":-a.outerWidth()/
2,top:10}).stop().fadeIn(200),clearTimeout(c),c=setTimeout(function(){a.fadeOut(1E3)},q))}}();t.Dragger=function(a,c,d,k){function q(f,p,z,y,M,ea){u=f;x=p;A=Math.max(0,z);B=Math.max(0,y);M!==fa&&null!==M&&(D=M,P=Math.floor((D+90)/360));f=D?"rotate("+D+"deg)":"";d&&d(u,x,A,B,D);p={transform:f,left:~~u-1,top:~~x-1,width:~~A,height:~~B};ea&&(p.transform+=(D?" ":"")+"scale3d(0,0,0)");T.css(p);ea&&(T.css({transition:"1s",transform:f+(D?" ":"")+"scale3d(1,1,1)"}),setTimeout(function(){T.css({transition:""})},
1500))}function n(f){ca(f);K=U.width();h=U.height();V=A;W=B;Y=u;O=x;g=f.clientX;m=f.clientY;b=-Math.sin(D/180*Math.PI)*(B/2+20);e=-Math.cos(D/180*Math.PI)*(B/2+20);$("body").addClass("nosel");X.on("vmousemove",v).on("vmouseup",H);10===F&&(E||(E=$('<div class="drag-rotate-msg">'),T.parent().append(E)),C(),E.show())}function v(f){if(F){S=f.clientX-g;Q=f.clientY-m;u=Y;x=O;1===F&&(u=Y+S,x=O+Q,J&&0===D%360?(0>u?u=0:u+A>K&&(u=K-A),0>x?x=0:x+B>h&&(x=h-B)):(u+A<w?u=w-A:u>K-w&&(u=K-w),x+B<w?x=w-B:x>h-w&&(x=
h-w)),J||0!==D%180||(3>Math.abs(u)?u=0:3>Math.abs(u+A-K)&&(u=K-A),3>Math.abs(x)?x=0:3>Math.abs(x+B-h)&&(x=h-B)));if(10===F){var p=e-Q;f=Math.atan((b+S)/p)/Math.PI*180;var z=Math.abs(f%90);if(2>z||88<z)f=90*Math.round(f/90);0<p&&(f+=180);p=(D-360*P)%360;-90<=f&&0>f&&270>=p&&180<p?P++:-90<=p&&0>p&&270>=f&&180<f&&P--;D=f+360*P;C()}f=0===D%360;f||(p=r(S,Q,-D),S=p.x,Q=p.y);if(R)if(6===F||8===F)S=Math.round(R*Q);else if(7===F||9===F)S=-Math.round(R*Q);var y=z=p=!1,M=!1;if(2===F||6===F||7===F)x=O+Q,B=W-
Q,J&&f?0>x&&(x=0,B=W+O):x+B<w?B=w-x:x>h-w&&(x=h-w,B=W+O-x),B<w&&(B=w,x=O+W-w),!J&&f&&3>Math.abs(x)&&(B+=x,x=0,p=6===F,y=2!==F);else if(4===F||8===F||9===F)B=W+Q,J&&f?x+B>h&&(B=h-x):B<w-x&&(B=w-x),B<w&&(B=w),!J&&f&&3>Math.abs(x+B-h)&&(B=h-x,p=9===F,y=4!==F);if(5===F||6===F||9===F)u=Y+S,A=V-S,J&&f?0>u&&(u=0,A=V+Y):u+A<w?A=w-u:u>K-w&&(u=K-w,A=V+Y-u),A<w&&(A=w,u=Y+V-w),!J&&f&&3>Math.abs(u)&&(A+=u,u=0,z=6===F,M=5!==F);else if(3===F||7===F||8===F)A=V+S,J&&f?u+A>K&&(A=K-u):A<w-u&&(A=w-u),A<w&&(A=w),!J&&
f&&3>Math.abs(u+A-K)&&(A=K-u,z=7===F,M=3!==F);R&&(y&&(p&&(u+=A-Math.round(R*B)),A=R*B),M&&(z&&(x+=B-Math.round(A/R)),B=A/R));f||1===F||10===F||(f=u-Y+(A-V)/2,p=x-O+(B-W)/2,u-=f,x-=p,p=r(f,p,D),u+=p.x,x+=p.y);q(u,x,A,B,D)}}function r(f,p,z){var y=Math.sqrt(f*f+p*p);p=y?Math.asin(p/y):0;0>f&&(p=Math.PI-p);p+=z/180*Math.PI;return{x:Math.cos(p)*y,y:Math.sin(p)*y}}function C(){E.text("rotation: "+Math.round(10*D)/10+"\u00b0")}function H(){10===F&&E.hide();F=0;R&&(R=A/B);$("body").removeClass("nosel");
X.off("vmouseup",H)}k=k||{};var w=k.minWidth||20,N=!0,J=k.enforceBoundary!==fa?k.enforceBoundary:!0,T=$(a),U=$(c),E,u=0,x=0,A=w,B=w,D=0,P=0,R,Y,O,V,W,F,S,Q,K,h,g,m,b,e,l="N E S W NW NE SE SW".split(" ");a="";for(c=0;c<l.length;c++)a=4>c?a+('<div class="wrap'+l[c]+'"><div class="resize '+l[c]+'" data-dir="'+l[c]+'"></div></div>'):a+('<div class="resize '+l[c]+'" data-dir="'+l[c]+'"></div>');k.enableRotate&&(a+='<div class="drag-rotate-wrap"><div class="resize drag-rotate">'+ROTATE_SVG+"</div></div>");
this.getVals=function(){return{x:u,y:x,w:A,h:B,rotation:D}};this.setVals=q;this.constrainVals=function(){if(0===D){K=U.width();h=U.height();var f=u,p=x,z=A,y=B;J?(0>f&&(f=0),0>p&&(p=0),z>K&&(y*=K/z,z=K),y>h&&(z*=h/y,y=h),f>K-z&&(f=K-z),p>h-y&&(p=h-y)):(f+z<w&&(f=w-z),p+y<w&&(p=w-y),f>K-w&&(f=K-w),p>h-w&&(p=h-w));f===u&&p===x&&z===A&&y===B||q(f,p,z,y,D)}};this.lockRatio=function(){R=A/B};this.toggleDrag=function(f){N=!!f};this.dragEnabled=function(){return N};this.bindMoveKeyEvents=function(){$d.on("keydown",
function(f){if(!(f.ctrlKey||f.metaKey||37!==f.which&&38!==f.which&&39!==f.which&&40!==f.which||$(f.target).is("input,textarea"))&&T.hasClass("drag-top")){f.preventDefault();var p=f.shiftKey?10:1;switch(f.which){case 37:u-=p;break;case 38:x-=p;break;case 39:u+=p;break;case 40:x+=p;break;default:return}q(u,x,A,B,D)}})};T.on("vmousedown",function(f){N&&(F=1,n(f))}).on("vmousedown",".resize",function(f){N&&(F=$(this).hasClass("drag-rotate")?10:l.indexOf($(this).attr("data-dir"))+2,n(f))});T.append(a)};
t.hoverGifs=function(a){$(a).find("a img").each(function(){var c=$(this)[0];$(this).hover(function(){c.src=c.src.replace(/\/2\/([a-z0-9]+)\.jpg/,"/$1.gif")},function(){c.src=c.src.replace(/\/([a-z0-9]+)\.gif/,"/2/$1.jpg")})})};applyTips=function(a){(a&&a.jquery?a.find(".tip"):"string"===typeof a?$(a+" .tip"):$(".tip")).each(function(){var c,d=$(this);d.parent().hover(function(k){c=setTimeout(function(){var q=d.text().length,n=k.clientX,v=k.clientY,r=L.width(),C=L.height();q=Math.min(260+q/5>>0,Math.max(r-
n,n)-40);d.width(q);v=v>C/2?v-d.height()-20:v+20;d.css({top:v,left:n>C/2?n-q-20:n+20}).fadeIn(200)},d.attr("data-delay")||400)},function(){clearTimeout(c);d.fadeOut(200)}).click(function(){clearTimeout(c)})})};t.checkSignup=Ka;var ja;t.showLogin=aa;t.googleAuthInit=function(){gapi.load("auth2",function(){gapi.auth2.init({client_id:"16163237658-20l9nkv7bci04f890j3rocd67cpdbmu0.apps.googleusercontent.com",cookie_policy:"single_host_origin"}).then(function(){$(".google-login-btn").removeClass("loading")},
function(a){error_dialog("Google authentication failed to load. Error message from Google: "+a.details)})})};var kb=t.commentDelete=function(a,c,d){if(c)confirm("Delete comment?")&&La(a,fa,d);else{var k=new Z({html:'<div id="com-delete-popup">Reason for deletion<div class="select"><select id="com-delete-reason"><option value="other">Other</option><option value="wrong_stream">Not appropriate for this stream</option><option value="abuse">Abuse of Imgflip Terms of Use</option></select></div><textarea id="com-delete-note" placeholder="Additional notes. Will be sent to user."></textarea><div class="select"><select id="com-delete-ban-length"><option value="">No comment ban</option><option value="7200">Ban user from commenting for 2 hours</option><option value="28800">Ban user from commenting for 8 hours</option><option value="86400">Ban user from commenting for 24 hours</option><option value="172800">Ban user from commenting for 48 hours</option><option value="-1">Ban user from commenting indefinitely</option></select></div><button type="button" id="com-delete-submit-btn" class="lr but">Delete Comment</button></div>',
refocusOnExit:!0});$("#com-delete-submit-btn").on("click",function(){var q=$(this);q.addClass("disabled");La(a,{reason:$("#com-delete-reason").val(),note:$("#com-delete-note").val(),ban_length:$("#com-delete-ban-length").val()},function(){k.hide();d&&d()},function(){q.removeClass("disabled")})});ba.getElementById("com-delete-reason").focus()}},Ba=!1;t.comment=Aa;var na;t.loading=G;t.loadingEl=function(a,c){var d=$(a);c?d.addClass("load-wrap").append('<div class="load load-el"></div>'):d.removeClass("load-wrap").find(".load-el").remove()};
var sa;t.progress=function(a){sa||($("#site-loading-bar").show(),sa=$("#site-loading-progress"));sa.width(100*a+"%")};t.submitImg=Na;t.signCanvas=function(a,c,d,k,q,n,v,r){k=k||4E4;var C=da();if(("pro"===C||"pro_basic"===C&&q)&&(n||$(".gen-no-watermark")).hasClass("checked")||c*d<=k)return!1;a.save();a.font="11px Arial";c=v||"imgflip.com";r===fa&&(r=Pa(a,d,c));if(r)a.fillStyle=r,a.fillText(c,4,d-5);else for(a.fillStyle="#ddd",a.shadowBlur=2,a.shadowColor="#000",r=0;7>r;r++)a.fillText(c,4,d-5);a.restore();
return!0};t.getSignColor=Pa;t.isValidImgUrl=function(a){if(!a.match(/^https?:\/\//))return!1;if(!t.URL)return!0;try{var c=new URL(a)}catch(d){return!1}return c&&c.hostname&&c.hostname!==location.hostname&&"/"!==c.pathname};var lb=function(){var a='\n\t\t\t<div class="survey-popup">\n\t\t\t\t<div class="form-label">Which thing(s) made you almost not use Imgflip?</div>\n\t\t\t\t<textarea class=\'survey-made-not-use\'></textarea>\n\t\t\t\t<div class="form-label">Which thing(s) ultimately made you continue using Imgflip?</div>\n\t\t\t\t<textarea class=\'survey-made-use\'></textarea>\n\t\t\t\t<div class="form-label">How disappointed would you be if you could no longer use Imgflip?</div>\n\t\t\t\t<div class="form-subtitle">(don\'t worry, Imgflip\'s not going anywhere!)</div>\n\t\t\t\t'+
la("1 - Not disappointed at all",!1,{className:"survey-how-disappointed"},1)+"\n\t\t\t\t"+la("2 - Minimally disappointed",!1,{className:"survey-how-disappointed"},2)+"\n\t\t\t\t"+la("3 - Somewhat disappointed",!1,{className:"survey-how-disappointed"},3)+"\n\t\t\t\t"+la("4 - Disappointed",!1,{className:"survey-how-disappointed"},4)+"\n\t\t\t\t"+la("5 - Very disappointed",!1,{className:"survey-how-disappointed"},5)+'\n\t\t\t\t<div class=\'form-btns full-width\'>\n\t\t\t\t\t<button type="button" class="survey-submit-btn b but">Submit</button>\n\t\t\t\t</div>\n\t\t\t</div>',
c=new Z({html:a}),d=c.el();d.on("click",".survey-submit-btn",function(){var k=d.find(".survey-made-use").val(),q=d.find(".survey-made-not-use").val(),n=d.find(".survey-how-disappointed.checked").data("value");if(k&&q&&n){var v=d.find(".survey-submit-btn");loadingEl(v,!0);$.ajax({url:"/ajax_submit_survey",type:"post",dataType:"json",data:{url:location.href,made_use:k,made_not_use:q,how_disappointed:n},success:function(r){if(r.error)error_dialog(r.error);else if(c.hide(),4<=n&&-1!==navigator.userAgent.toLowerCase().indexOf("android")){var C=
new Z({html:'\n\t\t\t\t\t\t\t<div class="survey-popup">\n\t\t\t\t\t\t\t\t<div class="form-label">Thank you for your feedback!</div>\n\t\t\t\t\t\t\t\t<div class="form-label">Would you like to leave a rating for the Imgflip app?</div>\n\t\t\t\t\t\t\t\t<div class="form-btns space-between">\n\t\t\t\t\t\t\t\t\t<button type="button" class="survey-close-btn l but">No thanks</button>\n\t\t\t\t\t\t\t\t\t<a href="https://play.google.com/store/apps/details?id=com.imgflip.twa" class="b but" target="_blank" rel="noopener">\n\t\t\t\t\t\t\t\t\t\t<svg class="star-svg" viewBox="0 0 24 24"><path d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg> Rate Imgflip\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>'});
C.el().on("click",".survey-close-btn,a",function(){C.hide();$(".survey-ask").remove()})}else MSG("Thank you for your feedback!","green"),$(".survey-ask").remove()},complete:function(){loadingEl(v,!1)}})}else MSG("Oops! Looks like some answers are missing.","red")})},Sa;(function(a){function c(h){X.on("change","#safe-button",function(){var g=$(this);if(!I.done)return g.toggleClass("checked"),ka();var m=g.hasClass("checked")?"NSFW":"SFW";if(!ia())return g.removeClass("checked"),aa();g.toggleClass("checked",
"NSFW"===m);$.ajax({url:"/ajax_safemode",type:"post",dataType:"json",data:{safe:m},success:h})})}function d(h){h&&location.reload()}function k(){X.on("contextmenu",".ctx-gif",function(h){var g=$(this),m=g.data("src")||g.attr("src"),b=/\/([a-z0-9]+)\.gif/.exec(m);if(b)return m=g.is("video"),b=b[1],g.data("private")?(g='<div class="shr-popup">'+n(b,"gif",!0,!1,"",m)+"</div>",BOX.show({html:g})):(g=g.closest(".base-unit,#img-main").find(".shr-open-btn"),v(b,"gif",g.data("title"),g.data("generator"),
!1,m,g.data("w"),g.data("h"))),ca(h)}).on("focus",".img-code",function(){$(this).select()})}function q(){X.on("vclick",".pause-gif",function(h){var g=$(this),m=g.find("img"),b=m.attr("src");b&&(m.attr("src",b.replace("/2/","/").replace(".jpg",".gif")),g.removeClass("pause-gif"));return ca(h)})}function n(h,g,m,b,e,l,f,p){switch(e){case "meme":var z="Meme Generator";var y="memegenerator";break;case "pie":z="Chart Maker";y="chart-maker";break;case "demotivational":z="Demotivational Maker",y="demotivational-maker"}var M=
h+"."+g,ea="https://imgflip.com/"+("gif"===g?"gif/":"i/")+h;e='<a href="'+ea+'"><img src="https://i.imgflip.com/'+M+'"'+(e?' title="made at imgflip.com"':"")+"/></a>";z&&(e+='<div><a href="https://imgflip.com/'+y+'">from Imgflip '+z+"</a></div>");z="";m||(z+='<div class="img-code-wrap"><div class="img-code-label">Image Link:</div><input type="text" class="img-code link" value="'+ea+'"/></div>',"gif"!==g?z+='<div class="img-code-wrap"><div class="img-code-label">Image HTML:</div><input type="text" class="img-code html" value=\''+
e+"'/></div>":(y='<div style="width:'+~~f+'px;max-width:100%;"><div style="height:0;padding-bottom:'+(Math.round(p/f*1E4)/100+'%;position:relative;">'),y=y+('<iframe width="'+~~f+'" height="'+~~p+'" style="position:absolute;top:0;left:0;width:100%;height:100%;" frameBorder="0" src="https://imgflip.com/embed/'+h+'"></iframe></div><p><a href="')+(ea+'">via Imgflip</a></p>'),y+="</div>",z=z+'<div class="img-code-wrap"><div class="img-code-label">Embed HTML (web/blog):</div><input type="text" class="img-code embed" value=\''+
(y+"'/>"),z+="</div>"));b||(m&&I.user.id?(b="/i-view/"+M+"?download",h="/i-view/"+h+".mp4?download"):(b="https://"+(m?"i2-download":"i-download")+".imgflip.com/"+M,h="https://"+(m?"i2-download":"i-download")+".imgflip.com/"+h+".mp4"),z+='<div class="img-download-btns"><a target="_blank" class="img-download l but" href="'+b+'">'+("gif"===g?"Download .gif":"Download Image")+"</a>"+(l?'<a target="_blank" class="img-download l but" href="'+h+'">Download .mp4</a>':"")+"</div>");return z}function v(h,g,
m,b,e,l,f,p){h='<div class="shr-popup"><div class="shr-btns-label">Share Link</div>'+getShareButtonsHtml(h,g,m)+n(h,g,!1,!1!==e,b,l,f,p)+"</div>";BOX.show({html:h})}function r(){var h=$(this),g=h.closest(".shr-btns"),m=encodeURIComponent(g.data("url")),b=encodeURIComponent(g.data("img"));g=encodeURIComponent(g.data("title"));var e="";h=h.attr("class").split(/\s+/);for(var l=0;l<h.length;l++){switch(h[l].replace("shr-","")){case "fb":e="https://www.facebook.com/sharer/sharer.php?u="+m;break;case "tw":e=
"https://twitter.com/intent/tweet?url="+m+"&text="+g+"&via=imgflip";break;case "pi":e="https://www.pinterest.com/pin/create/button/?url="+m+"&description="+g+"&media="+b;break;case "re":e="https://www.reddit.com/submit?url="+m+"&title="+g;break;case "wh":e="https://wa.me/?text="+(g+(g?"%20":"")+m);break;case "gm":e="https://mail.google.com/mail/u/0/?view=cm&fs=1&to&su="+g+"&body="+m+"&ui=2&tf=1";break;case "em":e="mailto:?subject="+g+"&body="+m}if(e)break}a.open(e)}function C(){var h=$(this).closest(".shr-btns"),
g=h.data("img"),m=function(b){var e={title:h.data("title"),url:h.data("url")};b&&(e.files=b);navigator.share(e)};if(!h.data("share_gif_files")&&".gif"===g.substr(-4))return m();try{fetch(g).then(function(b){b.blob().then(function(e){var l=g.split("/").slice(-1)[0];m([new File([e],l,{type:e.type})])})})["catch"](function(){m()})}catch(b){m()}}function H(){G("Fetching approval history");$.ajax({url:"/ajax_get_approval_history",dataType:"json",data:{iid:img.id},success:function(h){G(!1);h.error?error_dialog(h.error):
BOX.show({html:h.html})}})}function w(){G("Fetching image stats");W=W||$.getScript("https://www.gstatic.com/charts/loader.js");$.ajax({url:"/ajax_get_img_stats",dataType:"json",data:{iid:img.id},success:function(h){G(!1);h.error?error_dialog(h.error):(BOX.show({html:h.html}),W.done(function(){google.charts.load("current",{packages:["line"],callback:function(){for(var g=0;g<h.charts.length;g++){var m=h.charts[g],b=m[0],e=m[1];m=m[2];var l=new google.visualization.DataTable;l.addColumn("datetime","Time");
l.addColumn("number","Views");for(var f=0;f<e.length;f++)l.addRow([new Date(1E3*e[f][0]),e[f][1]]);b={chart:{title:b},height:300,legend:{position:"none"},hAxis:{title:"time"}};(new google.charts.Line($(m)[0])).draw(l,b)}}})}))}})}function N(){confirm("This image will be featured. Are you sure?")&&$.ajax({url:"/ajax_moderate",type:"post",dataType:"json",data:{action:"approve",live:1,iid:img.id},success:function(h){h.error?error_dialog(h.error):$("#img-approve").fadeOut()}})}function J(){F(img.id,!0,
function(){$("#img-disapprove").fadeOut()})}function T(){confirm("Permanently delete this image?")&&(G("Deleting image"),$.ajax({url:"/ajax_img_delete",type:"post",dataType:"json",data:{iid:img.id},success:function(h){h.error?(G(!1),error_dialog(h.error)):a.location="/creations"}}))}function U(){G("Updating Image");$.ajax({url:"/ajax_img_update",type:"post",dataType:"json",data:{iid:img.id,title:$("#img-title-edit").val(),tags:$("#img-tags-edit").val(),nsfw:$("#img-nsfw-edit").hasClass("checked")?
1:0,anon:$("#img-anon-edit").hasClass("checked")?1:0,disable_comments:$("#img-disable-comments-edit").hasClass("checked")?1:0},success:function(h){h.error?(G(!1),error_dialog(h.error)):a.location="https://"+a.location.host+a.location.pathname+"?lerp="+Date.now()}})}function E(){E.done||(E.done=!0,u())}function u(){var h=$('<div class="load">');$("#img-admin").append(h);$.ajax({url:"/ajax_img_admin",data:{iid:img.id},success:function(g){$("#img-edit-btn").remove();$("#img-admin").append(g)},complete:function(){h.remove()}})}
function x(h,g,m,b){if(!Q){var e=[],l=$("#img-coms");g&&l.find(".l0").quickEach(function(){e.push(this.attr("id").substr(3))});e=e.join(",");var f=h+":"+e,p=function(y){if(g){var M=l.find(".com");l.append(y.html);M=l.find(".com").not(M)}else l.html(y.html),M=l.find(".com");$("#img-coms-title").text(y.count+" Comment"+(1===y.count?"":"s"));$("#c-more-btn").toggleClass("display-none",!y.has_more);Ca(M);ha(M);m&&m()};if(S[f])p(S[f]);else{var z=$('<div class="load">');g?l.append(z):l.prepend(z);Q=!0;
$.ajax({url:"/ajax_get_comments",data:{iid:img.id,sort:h,skip_ids:e,required_id:b||""},type:"post",dataType:"json",success:function(y){y.error?error_dialog(y.error):(S[f]=y,p(y))},complete:function(){z.remove();Q=!1}})}}}function A(){var h=$(this),g=h.closest(".i-select-wrap").find(".i-select-btn");g.click();var m=h.data("sort"),b=h.text();x(m,!1,function(){g.text(b);h.siblings().removeClass("on");h.addClass("on")})}function B(h,g){var m=$("#img-coms-sort-wrap .on").data("sort");x(m,!0,g,h)}function D(){var h=
$("#img-coms-title"),g=$("#img-coms"),m=g.hasClass("collapsed");m?h.find("#img-coms-title-msg").remove():h.append('<span id="img-coms-title-msg">click to show</span>');g.toggleClass("collapsed",!m)}function P(h){h.addClass("c-linked");if(h.hasClass("child-of-bad")){var g=+h.data("l"),m=h.prev();do{var b=~~m.data("l");b<g&&m.hasClass("hidden")&&m.find(".bad-com-btn").click();m=m.prev()}while(m[0]&&0<b);a.scrollTo(0,h.offset().top)}}function R(h){ca(h);$(this).closest(".menu-wrap").find(".menu").toggle()}
function Y(h){var g=decodeURIComponent((ba.cookie.split("rootemail=")[1]||"").split(";")[0]);g='<div class="feedback-wrap"><div class="feedback-title">Submit Feedback</div><div class="feedback-intro">If you\'d like a response, specify your email. If you\'re submitting a bug report about a broken feature, please give as many details as possible about how it broke, otherwise it may be very hard to fix. If you would like to start a discussion with the community about an Imgflip feature, you can also post in the <a href="/m/imgflip">Imgflip Stream</a>.</div><p>Your name <small>(optional)</small></p><p><input type="text" class="feedback-name"/></p><p>Your email <small>(optional)</small></p><p><input type="email" class="feedback-email" autocomplete="email" value="'+
esc(g)+'"/></p><p>'+la("General Feedback (goes to developers)",!0,{className:"feedback-type"},"general")+"<br/>"+la("Content Feedback (goes to moderation team)",!1,{className:"feedback-type"},"content")+'</p><textarea class="feedback-text"></textarea><button type="button" class="feedback-submit b but">Submit Feedback</button></div>';g=new Z({html:g,onclose:function(m){m=m.el();if((m.find(".feedback-name").val()||m.find(".feedback-text").val())&&!confirm("Are you sure you want to toss the feedback you have written?"))return!1}});
g.el().data({from:h||"",box:g})}function O(h){var g=I.user;var m=ta("dm");var b='<a id="menu-install-btn" href="javascript:void(0)">Add to Home Screen</a>'+jb({dark:'<svg class="moon-svg" viewBox="-2 -2 28 28"><path d="M12.3 2a10 10 0 1 0-.3 20c3.7 0 7-2 8.7-5a10 10 0 0 1-8.4-15z"/></svg>',auto:"auto",light:'<svg class="sun-svg" viewBox="0 0 86 86"><path d="M43 66.2a4 4 0 0 1 4 3.8v8a4 4 0 0 1-8 .2v-8a4 4 0 0 1 4-4Zm22.7-6.7.1.2 5.5 5.5a4 4 0 0 1-5.5 5.8l-.1-.2-5.5-5.5a4 4 0 0 1 5.5-5.8Zm-39.9 0A4 4 0 0 1 26 65l-.1.2-5.5 5.6a4 4 0 0 1-5.9-5.4l.1-.2 5.5-5.6a4 4 0 0 1 5.7 0ZM43 24a19 19 0 1 1 0 38 19 19 0 0 1 0-38ZM15.8 39a4 4 0 0 1 .2 8H8a4 4 0 0 1-.2-8h8ZM78 39a4 4 0 0 1 .2 8h-8a4 4 0 0 1-.2-8h8Zm-6.7-23.7a4 4 0 0 1 .2 5.5l-.2.1-5.5 5.5A4 4 0 0 1 60 21l.2-.1 5.5-5.5a4 4 0 0 1 5.6 0ZM20.2 15l.1.2 5.5 5.5a4 4 0 0 1-5.5 5.8l-.1-.2-5.5-5.5a4 4 0 0 1 5.5-5.8ZM43 4a4 4 0 0 1 4 3.8v8a4 4 0 0 1-8 .2V8a4 4 0 0 1 4-4Z"/></svg>'},
"1"===m?"dark":"0"===m?"light":"auto","menu-toggle-dark")+'<a class="feedback-open" href="javascript:void(0)" data-from="menu" title="Submit feedback about Imgflip">Help & Feedback</a>';if(g.id){if($("body").addClass("logged-in"),$(".gen-login-wrap").hide(),$(".gen-anon-wrap").show(),$(".gen-private small").text("(only you can view)"),da()&&($("#logo").after('<div id="pro-logo">pro</div>'),$(".pro-callout").remove(),$(".head .ad,.gen-bottom-ad").remove()),b='<a href="/user/'+esc(g.user)+'">Profile<div id="menu-pts">'+
g.points.toLocaleString()+' pts</div></a><a href="/creations">My Images</a>'+(g.follows_streams?'<a href="/followed">Followed Streams</a>':"")+(g.owns_streams?'<a href="/my-streams">My Streams</a>':"")+b+'<a href="/settings">Settings</a><a id="aLogout" href="javascript:void(0)">Logout</a>',m=esc(g.user),$("#nt-count").text(g.nots).toggleClass("has-nots",!!g.nots).removeClass("display-none"),g.has_chats){var e=g.has_unread_msgs&&"/memechat"!==location.pathname.substr(0,9);e='<a href="/memechat" id="u-msgs-btn" class="'+
(e?"has-unread":"")+'" title="'+(e?"Unread Messages":"")+'"><svg viewBox="0 0 100 100"><path d="M8,18l84,0l0,64l-84,0l0,-64l42,32l42,-32"/></svg></a>';$("#nt-count").after(e)}}else $(".gen-login-wrap").show(),$("#u-anon").show(),b='<a href="javascript:void(0)" class="show-login">Login</a><a href="javascript:void(0)" class="show-signup">Signup</a>'+b,m="Login ";$("#u-menu").html(b);$("#u-long").html(m).before(g.icon_html||"");g=a.location.pathname.split("/")[1];switch(g){case "gif-maker":a.proStatusChanged&&
a.proStatusChanged();a.ajaxGetRecentVideos&&a.ajaxGetRecentVideos();break;case "i":case "gif":case "i-page":if(!h&&a.img){m=I.user;if(m.id){if(m.id===img.uid||-1!==img.stream_mod_uids.indexOf(m.id)||3<=m.priv){b=img.uid===I.user.id;e="";img.submitted&&(e=img.featured?"<span class='my-label-featured'>Featured</span>":"<span class='my-label-submitted'>Submitted</span>",e=img.stream_name?e+(" in <a href='/m/"+esc(img.stream_name)+"'>"+esc(img.stream_name)+"</a>"):e+" in [deleted stream]");var l="",f=
"",p="",z="",y="",M="",ea="",Ta="",pa=-1!==img.stream_mod_uids.indexOf(I.user.id)||3<=I.user.priv;if(b||pa)l='<button type="button" id="img-edit-btn" class="l but sml">Edit Image</button>';if(b||5<=I.user.priv)f='<button type="button" id="img-delete" class="lr but sml">Delete Image</button>';pa&&(z='<button type="button" id="img-approval-history-btn" class="l but sml">Approval History</button>');if(b||pa)y='<button type="button" id="img-stats-btn" class="l but sml">Image Stats</button>';b&&img.can_submit&&
(p='<button type="button" class="my-submit-btn l but sml" data-iid="'+esc(img.id)+'">Submit image to the Imgflip community</button>');pa&&(M='<button type="button" id="img-disapprove" class="l but sml display-none">Disapprove</button>',ea='<button type="button" id="img-approve" class="l but sml display-none">Approve</button>');if(b||pa)Ta='<button type="button" id="img-show-gen-options" class="l but sml display-none">Creation Settings</button>';b='<div id="img-admin" class="img-pane ibox">'+(e?'<div class="my-submit-status">'+
e+"</div>":"")+'<div class="img-admin-btns">'+p+l+f+z+y+M+ea+Ta+"</div></div>";$("#img-secondary").prepend(b);X.on("click","#img-edit-btn",E).on("click","#img-delete",T).on("click","#img-update",U).on("click","#img-approve",N).on("click","#img-disapprove",J).on("click","#img-approval-history-btn",H).on("click","#img-stats-btn",w);3<=m.priv&&u()}"1"===I.vote&&$(".img-up").addClass("set");"0"===I.vote&&$(".img-down").addClass("set");Ca()}I.can_claim&&$("#img-panel").before('<div class="ibox img-claim-msg">You created this image, but you were not logged in. You\'ll only be able to claim it for up to an hour after you created it. <a href="/login?claim_iid='+
img.id+'">Login to claim or delete it</a></div>')}da()||h||!a.sfw||img.author_pro||$("#img-panel").before(V("ad banner-ad img-ad","leaderboard_atf"))}a.mm&&mm.toggleSetDefaultSettingsBtn();a.toggleSaveSettingsBtn&&toggleSaveSettingsBtn();I.surveyed||"memegenerator"!==g&&"gif-maker"!==g||($("#mm-recs-wrap").before('\n\t\t\t\t\t<div class="survey-ask">\n\t\t\t\t\t\t<p>Want to improve Imgflip?</p>\n\t\t\t\t\t\t<button type="button" class="survey-open-btn l but sml">Answer 3 Questions</button>\n\t\t\t\t\t</div>'),
X.on("click",".survey-open-btn",lb))}a.embedCodes=n;a.getShareButtonsHtml=function(h,g,m,b){var e="https://imgflip.com/"+("gif"===g?"gif/":"i/")+h;h="https://i.imgflip.com/"+h+"."+g;g="";navigator.share&&(g="your device",navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)?g="iOS":-1!==navigator.userAgent.toLowerCase().indexOf("android")&&(g="Android"));return'<div class="shr-btns" data-url="'+esc(e)+'" data-img="'+esc(h)+'" data-title="'+esc(m)+'" data-share_gif_files="'+(b?1:"")+'"><button type="button" class="shr-btn shr-fb" title="Facebook"><svg viewBox="0 0 12 12"><path d="M9.1.1V2H8c-.4 0-.7.1-.9.3-.1.1-.2.4-.2.7v1.4H9l-.2 2.1H6.9V12H4.7V6.5H2.9V4.4h1.8V2.8c0-.9.3-1.6.7-2.1C6 .2 6.6 0 7.5 0c.7 0 1.2 0 1.6.1z"/></svg></button><button type="button" class="shr-btn shr-tw" title="Twitter"><svg viewBox="80 80 240 240"><path d="M153.6 301.6c94.4 0 146-78.2 146-146 0-2.2 0-4.4-.2-6.6a104.4 104.4 0 0 0 25.6-26.5 102.4 102.4 0 0 1-29.5 8 51.5 51.5 0 0 0 22.6-28.3 102.8 102.8 0 0 1-32.6 12.4 51.3 51.3 0 0 0-87.4 46.8 145.6 145.6 0 0 1-105.7-53.6 51.3 51.3 0 0 0 15.9 68.5 51 51 0 0 1-23.3-6.4v.6a51.3 51.3 0 0 0 41.1 50.3 51.2 51.2 0 0 1-23.1.9 51.4 51.4 0 0 0 48 35.6 103 103 0 0 1-63.8 22 104.4 104.4 0 0 1-12.2-.8 145.2 145.2 0 0 0 78.6 23"/></svg></button><button type="button" class="shr-btn shr-pi" title="Pinterest"><svg viewBox="0 0 312.5 312.5"><path d="M153.8 3.8a152.5 152.5 0 0 0-55.6 294.5c-1.3-12-2.5-30.6.6-43.8l17.8-75.8s-4.5-9.1-4.5-22.6c0-21.2 12.3-37 27.6-37 13 0 19.3 9.7 19.3 21.4 0 13.1-8.4 32.7-12.7 50.8-3.6 15.2 7.6 27.5 22.6 27.5 27.1 0 48-28.5 48-69.8 0-36.5-26.3-62-63.7-62a66 66 0 0 0-68.9 66.2c0 13 5 27.1 11.4 34.8a4.6 4.6 0 0 1 1 4.3l-4.2 17.3c-.7 2.8-2.2 3.4-5.1 2-19-8.8-31-36.7-31-59 0-48.1 35-92.3 100.8-92.3 52.9 0 94 37.7 94 88 0 52.6-33.2 95-79.1 95-15.5 0-30-8.1-35-17.6l-9.5 36.3a170.4 170.4 0 0 1-19 40 152.4 152.4 0 0 0 197.7-145.8C306.3 72 238 3.8 153.8 3.8"/></svg></button><button type="button" class="shr-btn shr-re" title="Reddit"><svg viewBox="3 3 14 14"><path d="M16.67 10a1.46 1.46 0 0 0-2.47-1 7.12 7.12 0 0 0-3.85-1.23L11 4.65l2.14.45a1 1 0 1 0 .13-.61L10.82 4a.31.31 0 0 0-.37.24l-.74 3.47a7.14 7.14 0 0 0-3.9 1.23 1.46 1.46 0 1 0-1.61 2.39 2.87 2.87 0 0 0 0 .44c0 2.24 2.61 4.06 5.83 4.06s5.83-1.82 5.83-4.06a2.87 2.87 0 0 0 0-.44 1.46 1.46 0 0 0 .81-1.33zm-10 1a1 1 0 1 1 1 1 1 1 0 0 1-1-1zm5.81 2.75a3.84 3.84 0 0 1-2.47.77 3.84 3.84 0 0 1-2.47-.77.27.27 0 0 1 .38-.38A3.27 3.27 0 0 0 10 14a3.28 3.28 0 0 0 2.09-.61.27.27 0 1 1 .39.4zm-.18-1.71a1 1 0 1 1 1-1 1 1 0 0 1-1.01 1.04z"/></svg></button><button type="button" class="shr-btn shr-wh" title="WhatsApp"><svg viewBox="0 0 175 175"><path d="M5.9 169L17.3 127A80.7 80.7 0 016.6 86.5a81 81 0 0181-80.8 80.4 80.4 0 0157.1 23.7 80.4 80.4 0 0123.7 57.2 81 81 0 01-80.9 81 80.9 80.9 0 01-38.7-9.9z" fill="#fff"/><path d="M87.5 19.3a67.3 67.3 0 00-67.3 67.3 67.1 67.1 0 0010.3 35.8l1.6 2.5-6.8 24.9 25.5-6.7 2.4 1.4a67.1 67.1 0 0034.2 9.4 67.3 67.3 0 0067.3-67.2c0-18-6.9-35-19.7-47.6a66.9 66.9 0 00-47.5-19.8z" fill="#4ced69"/><path d="M67.3 52.8c-1.6-3.3-3.2-3.4-4.6-3.6h-3.9c-1.3 0-3.5.5-5.4 2.6-1.9 2-7 6.9-7 16.8s7.2 19.6 8.2 20.9c1 1.3 14 22.4 34.6 30.6 17 6.7 20.5 5.4 24.2 5 3.7-.3 12-5 13.6-9.6 1.8-4.8 1.8-8.8 1.2-9.6-.4-.9-1.8-1.3-3.8-2.3-2-1.1-12-6-13.9-6.6-1.7-.7-3.2-1.1-4.5 1a117.5 117.5 0 01-6.4 7.9c-1 1.3-2.4 1.5-4.4.5-2-1-8.6-3.1-16.3-10a61 61 0 01-11.2-14c-1-2 0-3.1.9-4.2l3-3.5c1-1.1 1.4-2 2-3.3.7-1.5.4-2.6-.2-3.7l-6.1-15" fill="#fff"/></svg></button><button type="button" class="shr-btn shr-gm" title="Gmail"><svg viewBox="7 7 50 50"><path fill="#EAEAEA" d="M53 50H11a3 3 0 0 1-3-3V17a3 3 0 0 1 3-3h42a3 3 0 0 1 3 3v30a3 3 0 0 1-3 3z"/><path fill="#D54C3F" d="M14 50h-3a3 3 0 0 1-3-3V17a3 3 0 1 1 6 0v33z"/><path fill="#B63524" d="M50 50h3a3 3 0 0 0 3-3V17a3 3 0 1 0-6 0v33z"/><path fill="#DE5145" d="M54.7 19.5a3 3 0 1 0-3.4-5L32 28.5l-19.3-14a3 3 0 0 0-3.4 5l-.1-.1L32 36"/><line fill="#DE5145" x1="54.799" y1="19.401" x2="32" y2="36"/><path fill="#EFEFEF" d="M53 14a3 3 0 0 0-1.7.5L32 28.5l-19.3-14A3 3 0 0 0 11 14h42z"/><path fill="#C64132" d="M14 24.2l-5-5 .3.3-.1-.1 4.8 3.5v1.3"/><polyline fill="#E3E3E3" points="28.668,38.591 14,50 14.001,24.063 28.665,38.587"/><polygon fill="#C8C8C8" points="28.668,38.591 32,36 14.001,22.896 14.001,24.063 28.665,38.587"/><polygon fill="#D9D9D9" points="40.061,50 50,50 50,22.895 32,36 28.665,38.587"/></svg></button><button type="button" class="shr-btn shr-em" title="Email"><svg viewBox="0 0 100 100"><path d="M8,18l84,0l0,64l-84,0l0,-64l42,32l42,-32"/></svg></button>'+
(g?'<button type="button" class="shr-btn-device lb but">Share via '+g+"</button>":"")+"</div>"};var V=a.adCode=function(h,g,m){if(da()||0===a.location.host.indexOf("dev."))return"";a.ramp=a.ramp||{};a.ramp.que=a.ramp.que||[];"med_rect_btf"===g&&m&&(a.ramp.forcePath="medrect-allsizes");$.getScript("https://cdn.intergient.com/1025042/74518/ramp_config.js");$.getScript("https://cdn.intergient.com/ramp_core.js");$.getScript("https://btloader.com/tag?o=5150306120761344&upapi=true");var b="pw-"+g+"-desktop",
e="pw-"+g+"-mobile";a.ramp.que.push(function(){a.ramp.addTag(b)});a.ramp.que.push(function(){a.ramp.addTag(e)});return'<div class="'+h+'">\n\t\t\t\t<div data-pw-desk="'+g+'" id="'+b+'"></div>\n\t\t\t\t<div data-pw-mobi="'+g+'" id="'+e+'"></div>\n\t\t\t</div>'};a.addDoNotSellBtn=function(){$("#do-not-sell-btn").text("CCPA: Do not sell my info to personalize Imgflip ads")};a.formValues=function(h){var g={};h.find("input,textarea,select,.check-wrap").each(function(){var m=$(this);if(m.hasClass("check-wrap"))g[m.data("name")]=
m.hasClass("checked")?1:0;else switch(m.attr("type")){case "checkbox":g[m.attr("name")]=m.prop("checked")?1:0;break;case "submit":break;default:g[m.attr("name")]=m.val()}});return g};var W,F=a.disapproveImgPopup=function(h,g,m){var b="";g&&(b+='<div class="img-disapprove-warning">This image is currently featured. Disapproving it will remove it from all featured pages. This should generally only be done when the image violates Imgflip terms of service or the stream rules.</div>');var e=new Z({html:b+
'<div class="img-disapprove-reason-label">Reason for Disapproval</div><div class="select"><select class="img-disapprove-reason"><option value="other">Other</option><option value="repost">Repost/Uncreative</option><option value="political">Political</option><option value="spam">Spam</option><option value="harassment">Harassment</option><option value="abuse">Abuse (any other breach of imgflip.com/terms)</option><option value="wrong_stream">Wrong Stream (violates posting rules)</option><option value="wrong_language">Text in Wrong Language for Stream</option></select></div><div class="img-disapprove-notify-warning">If you select a reason other than "Other" or specify a message, the user will receive a notification explaining why their image was disapproved and how to fix it in the future.</div><textarea class="img-disapprove-note" placeholder="Notes to be sent to user (optional)"></textarea><button type="button" class="img-disapprove-submit r but">Disapprove</button>',
pad:20,w:600}),l=e.el();l.find(".img-disapprove-reason").focus();l.on("click",".img-disapprove-submit",function(){G("Disapproving image");$.ajax({url:"/ajax_moderate",type:"post",dataType:"json",data:{action:"disapprove",iid:h,reason:l.find(".img-disapprove-reason").val(),note:l.find(".img-disapprove-note").val()},success:function(f){G(!1);f.error?error_dialog(f.error):(e.hide(),m&&m())}})})},S={},Q=!1,K=a.addGifPlayButtons=function(h){$(h).each(function(){var g=$(this),m=g.parent().parent(),b=function(){m.addClass("pause-gif");
g.on("vclick",function(l){var f=m.hasClass("pause-gif");m.removeClass("pause-gif");g[0].play();if(f)return ca(l)})},e=g[0].play();e?e["catch"](function(l){b()}):b()})};a.openFeedback=Y;Sa=function(){X.on("vclick",".i-select-btn",function(){var b=$(this),e=b.siblings(".i-select-dropdown");if(e.hasClass("hidden")){var l=L.width(),f={left:"auto",right:"auto"},p=b.offset().left;b=p+b.width()>l-p?"right":"left";f[b]=0;e.css(f);e.removeClass("hidden");var z=function(){e.addClass("hidden");$d.off("vclick",
z)};$d.on("vclick",z);e.data("close",z);$(".i-select-dropdown").not(e).each(function(){var y=$(this).data("close");y&&y()})}else e.addClass("hidden")}).on("vclick",".i-select-more-btn",function(b){$(this).closest(".i-select-dropdown").find(".display-none").removeClass("display-none");$(this).remove();b.preventDefault()}).on("vclick",".i-select-wrap",function(b){b.stopPropagation()}).on("vclick",".my-submit-btn",function(){Na($(this).attr("data-iid"))}).on("input change",".i-stream-search",ma(function(){eb($(this))},
200)).on("click",".img-flag-cancel",cb).on("click",".img-flag-submit",db).on("click",".img-flag-btn",bb).on("vclick",".menu-btn",R).on("vclick",".menu-wrap",function(b){b.stopPropagation()}).on("vclick",function(){$(".menu").hide()}).on("click","#panel-search-icon",function(){$("#panel-search-back").toggleClass("hidden");$("#panel-search-input").focus()}).on("click",".s-submit",function(){$(this).prev(".s-form").submit()}).on("click",".show-login",function(){aa()}).on("click",".show-signup",function(){aa(fa,
fa,fa,!0)}).on("vclick","#nt-count",Xa).on("vclick","#u-msgs-btn",function(){location.href="/memechat"}).on("vclick","#aLogout",Va).on("vclick",".menu-toggle-dark .toggle-opt",function(){var b=$(this).data("value");if(navigator.cookieEnabled){$(".menu-toggle-dark .toggle-opt").removeClass("selected").filter('[data-value="'+b+'"]').addClass("selected");b="dark"===b?"1":"light"===b?"0":"";var e="1"===b||""===b&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches;$("body").toggleClass("darkmode",
e);ua("dm",b,30)}else error_dialog("Dark mode requires cookies to be enabled in order to save your settings")}).on("click",".google-login-btn",function(){gapi.auth2.getAuthInstance().signIn({scope:"profile email"}).then(Wa)}).on("click",".feedback-open",function(){Y($(this).data("from"))}).on("click",".feedback-submit",function(){var b=$(this).closest(".BOX"),e=b.find(".feedback-text").val();e?(G("Submitting feedback"),$.ajax({url:"/ajax_submit_feedback",type:"post",dataType:"json",data:{name:b.find(".feedback-name").val(),
email:b.find(".feedback-email").val(),type:b.find(".feedback-type.checked").data("value"),text:e,url:location.href,from:b.data("from"),width:$w.width(),height:$w.height(),standalone_app:a.matchMedia&&a.matchMedia("(display-mode: standalone)").matches?1:0,user_agent:navigator.userAgent,concurrency:navigator.hardwareConcurrency,memory:navigator.deviceMemory},success:function(l){G(!1);l.error?error_dialog(l.error):(b.data("box").hide(!0),MSG(l.msg,"green"))}})):MSG("Enter some feedback first!","red")}).on("click",
".shr-open-btn",function(){var b=$(this);v(b.data("id"),b.data("ext"),b.data("title"),b.data("generator"),!0,!1,b.data("w"),b.data("h"))}).on("click",".shr-btn",r).on("click",".shr-btn-device",C).on("click",".c-text img,.magnify",function(){var b=$(this);if(b.is("video")){var e=b.data("w"),l=b.data("h"),f=L.width(),p=L.height();e/l>f/p?(f=Math.min(e,f),p=l/e*f):(p=Math.min(l,p),f=e/l*p);b=b.clone().attr("id",null).removeClass("magnify").css({verticalAlign:"top",width:f,height:p});new Z({html:b,bg:"transparent"});
b[0].play()}else(new Z({img:b.attr("src")})).el().find("img").toggleClass("ctx-gif",b.hasClass("ctx-gif"))}).on("click",".c-img-link",function(){var b=$(this),e=b.data("shown");if(e)b.next(".c-img").hide(),b.data("shown",!1);else{if(!1===e)b.next(".c-img").show();else{e="//i.imgflip.com/"+b.text().split(" ")[0];var l=e.match(/\/([a-z0-9]+)\.(gif|mp4|webm)/);l&&a.gifVideoIids&&-1!==gifVideoIids.indexOf(parseInt(l[1],36)+"")?(b.after('<div class="c-img pause-wrap"><video disableRemotePlayback muted loop playsinline ><source type="video/mp4" src="//i.imgflip.com/'+
l[1]+'.mp4"></video></div>'),K(b.next().find("video"))):b.after('<img class="c-img" src="'+e+'"/>');b.next(".c-img").on("load loadstart",function(){ha(b.closest(".com"))})}b.data("shown",!0)}ha(b.closest(".com"))}).on("click",".bad-com-btn",function(){var b=$(this).closest(".com"),e=b.find(".c-text"),l=e.data("text");l&&e.append('<div class="c-textonly">'+l+"</div>");b.removeClass("hidden");ha(b);for(e=b.next();e.hasClass("child-of-bad");)e.removeClass("child-of-bad"),ha(e),e=e.next();b.find(".bad-com").remove()}).on("click",
".c-show-full-btn",function(){var b=$(this),e=b.closest(".com");e.toggleClass("c-show-full");e.hasClass("c-show-full")?(b.data("text",b.text()),b.text("Hide Full Comment")):b.text(b.data("text"))}).on("click","#menu-install-btn",function(){$("body").removeClass("install-event-fired");h.prompt()});k();q();ha();L.on("resize",ma(function(){ha()},300));"serviceWorker"in navigator&&(a.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js?a")}),!1===navigator.onLine&&$("#panel-offline-msg").text("You are offline. This page is cached and may be out of date.").removeClass("display-none"),
.03125>Math.random()&&navigator.serviceWorker.ready.then(function(b){b.active.postMessage("cache_clear_old_entries")}));var h;$w.on("beforeinstallprompt",function(b){b.preventDefault();h=b.originalEvent;$("body").addClass("install-event-fired")});if(a.matchMedia){var g=a.matchMedia("(prefers-color-scheme: dark)"),m=function(b){ta("dm")||$("body").toggleClass("darkmode",!!b.matches)};g.addEventListener?g.addEventListener("change",m):g.addListener(m)}};I.done&&O();$(function(){$(".menu-wrap").each(function(){var h=
$(this),g=h.find(".menu");h.hover(function(){g.show()},function(){g.hide()})});applyTips()});a.initHome=function(){var h=$(".base-unit").eq(5),g=va(function(){100>h.offset().top-L.height()-L.scrollTop()&&($("div.base-img").quickEach(function(){this.replaceWith('<img class="'+this.attr("class")+'" src="'+this.data("src")+'" alt="'+this.data("alt")+'"/>')}),L.off("scroll",g))});h[0]&&(L.on("scroll",g),g());X.on("vclick",".base-toggle-more",function(b){$("#leaderboard,#base-top-memes,.base-create,#base-pro").toggleClass("force-show");
return ca(b)}).on("click",".stream-follow-btn,.stream-unfollow-btn",function(){if(!I.done)return ka();if(I.user.id){var b=$(this),e=b.hasClass("stream-follow-btn");G();$.ajax({url:"/ajax_follow_stream",type:"post",dataType:"json",data:{stream_id:b.data("id"),follow:e?1:0},success:function(l){G(!1);l.error?error_dialog(l.error):(b.siblings(".stream-follow-btn,.stream-unfollow-btn").removeClass("hidden"),b.addClass("hidden"),e&&MSG("This stream will now show up in your stream dropdown and Followed Streams",
"green"))}})}else aa()}).on("click",".stream-mods-toggle-more",function(){var b=$(this);b.closest(".stream-mods").toggleClass("show-all");var e=b.data("swap");b.data("swap",b.text());b.text(e)}).on("click",".stream-claim-btn",function(){confirm("Are you sure you want to claim this stream and become an owner? You will be responsible for monitoring the approval queue and promoting other moderators as necessary.")&&(G("Claiming Stream"),$.ajax({url:"/ajax_stream_claim",type:"post",dataType:"json",data:{stream_id:$(this).data("id")},
success:function(b){b.error?(G(!1),error_dialog(b.error)):(MSG("Stream claimed successfully!","green"),a.location.reload())}}))}).on("click",".base-vote .img-audio-toggle",function(){Ma($(this),$(this).closest(".base-unit").find("video"))}).on("click",".img-up,.img-down",function(){var b=$(this);za(b.closest(".base-vote").data("iid"),b.hasClass("img-up")?1:0,this.parentNode)}).on("vclick",".base-img-more-btn",function(b){var e=$(this),l=e.closest(".base-img-wrap-wrap"),f=e.data("prev_height");f&&
a.scrollTo(0,$(a).scrollTop()-l.outerHeight()+f);e.data("prev_height",f?!1:l.height());l.toggleClass("base-img-showing-more",!f);e.text(f?"Show More":"Show Less");return ca(b)});K("video.base-img");c(d);if(!da()){var m=$(".base-ad-top");m[0]&&m.replaceWith(V("ad banner-ad base-ad-top","leaderboard_atf"));m=$(".base-ad-side");m[0]&&1100<a.innerWidth&&m.replaceWith(V("base-ad-side","med_rect_btf",!0))}};a.initFlip=function(){if(a.img){$("#c-new-main").find(".c-new-text").focus(function(){I.done&&!ia()?
aa():!I.done||I.user.email_verified||da()||ra()});$(".img-down").click(function(){za(img.id,0,this.parentNode)});$(".img-up").click(function(){za(img.id,1,this.parentNode)});X.on("click",".c-up,.c-down",ab).on("click",".c-delete",function(){var e=$(this).closest(".com"),l=e.attr("id").substr(3);e=+e.data("uid")===I.user.id;kb(l,e,function(){$("#com"+l).slideUp(function(){$(this).remove()})})}).on("click",".c-reply",Za).on("click",".c-flag",Ya).on("click",".c-add-btn",function(){Aa(img.id,$(this).closest(".c-new-wrap"))}).on("keydown",
".c-new-text",function(e){13===e.which&&(e.metaKey||e.ctrlKey)&&Aa(img.id,$(this).closest(".c-new-wrap"))}).on("click",".c-meme-btn",function(){if(!I.done)return ka();ia()?I.user.email_verified||da()?showGenerator($(this).closest(".c-new-wrap")):ra():aa()}).on("click",".c-add-img-btn",function(){$a($(this).closest(".c-new-wrap").find(".c-new-text"))}).on("click",".c-right",function(e){if(-1!=="com c-right c-text c-textonly c-stats c-points c-reply-count".split(" ").indexOf($(e.target).attr("class"))){e=
$(this).closest(".com");for(var l=~~e.data("l"),f=e.next(),p=e.hasClass("collapsed"),z=!1;~~f.data("l")>l;)p?f.show():f.hide(),f=f.next(),z=!0;z&&e.toggleClass("collapsed",!p)}}).on("click",".img-audio-toggle",function(){Ma($(this),"#img-wrap video")}).on("click","#img-coms-sort-wrap .i-select-link",A).on("click","#img-coms-title",D).on("click","#c-more-btn",function(){B()});var h=$(".c-lazy-img").eq(0).closest(".com"),g=va(function(){100>h.offset().top-L.height()-L.scrollTop()&&($(".c-lazy-img").quickEach(function(){this.replaceWith('<img src="'+
this.data("src")+'" alt="'+this.attr("alt")+'"/>')}),L.off("scroll",g))});h[0]&&(L.on("scroll",g),g());"gif"===img.type&&K("video#vid");var m=location.hash;if(m&&0===m.search(/^#com[0-9]+$/)){var b=$(m);!b[0]&&$(".com")[0]?(G("Loading Comment"),B(m.substr(4),function(){G(!1);b=$(m);b[0]&&(P(b),a.scrollTo(0,b.offset().top))})):P(b)}}};a.initData=O})(t);(function(a,c,d,k){function q(b){for(;b&&"undefined"!==typeof b.originalEvent;)b=b.originalEvent;return b}function n(b){for(var e={},l,f;b;){l=a.data(b,
u);for(f in l)l[f]&&(e[f]=e.hasVirtualBinding=!0);b=b.parentNode}return e}function v(){P&&(clearTimeout(P),P=0);P=setTimeout(function(){h=P=0;V.length=0;W=!1;F=!0},a.vmouse.resetTimerDuration)}function r(b,e,l){var f;if(!(f=l&&l[b])){if(l=!l)a:for(l=e.target;l;){if((f=a.data(l,u))&&(!b||f[b]))break a;l=l.parentNode}f=l}if(f){var p=e;l=p.type;p=a.Event(p);p.type=b;b=p.originalEvent;f=a.event.props;-1<l.search(/^(mouse|click)/)&&(f=B);if(b){var z=f.length;for(y;z;){var y=f[--z];p[y]=b[y]}}-1<l.search(/mouse(down|up)|click/)&&
!p.which&&(p.which=1);if(-1!==l.search(/^touch/)&&(y=q(b),l=y.touches,y=y.changedTouches,b=l&&l.length?l[0]:y&&y.length?y[0]:k))for(l=0,f=A.length;l<f;l++)y=A[l],p[y]=b[y];a(e.target).trigger(p)}return p}function C(b){var e=a.data(b.target,x);W||h&&h===e||!(e=r("v"+b.type,b))||(e.isDefaultPrevented()&&b.preventDefault(),e.isPropagationStopped()&&b.stopPropagation(),e.isImmediatePropagationStopped()&&b.stopImmediatePropagation())}function H(b){var e=q(b).touches,l;e&&1===e.length&&(l=b.target,e=n(l),
e.hasVirtualBinding&&(h=K++,a.data(l,x,h),P&&(clearTimeout(P),P=0),O=F=!1,l=q(b).touches[0],R=l.pageX,Y=l.pageY,r("vmouseover",b,e),r("vmousedown",b,e)))}function w(b){F||(O||r("vmousecancel",b,n(b.target)),O=!0,v())}function N(b){if(!F){var e=q(b).touches[0],l=O,f=a.vmouse.moveDistanceThreshold,p=n(b.target);(O=O||Math.abs(e.pageX-R)>f||Math.abs(e.pageY-Y)>f)&&!l&&r("vmousecancel",b,p);r("vmousemove",b,p);v()}}function J(b){if(!F){F=!0;var e=n(b.target),l;r("vmouseup",b,e);!O&&(l=r("vclick",b,e))&&
l.isDefaultPrevented()&&(l=q(b).changedTouches[0],V.push({touchID:h,x:l.clientX,y:l.clientY}),W=!0);r("vmouseout",b,e);O=!1;v()}}function T(b){b=a.data(b,u);var e;if(b)for(e in b)if(b[e])return!0;return!1}function U(){}function E(b){var e=b.substr(1);return{setup:function(){T(this)||a.data(this,u,{});a.data(this,u)[b]=!0;D[b]=(D[b]||0)+1;1===D[b]&&Q.bind(e,C);a(this).bind(e,U);S&&(D.touchstart=(D.touchstart||0)+1,1===D.touchstart&&Q.bind("touchstart",H).bind("touchend",J).bind("touchmove",N).bind("scroll",
w))},teardown:function(){--D[b];D[b]||Q.unbind(e,C);S&&(--D.touchstart,D.touchstart||Q.unbind("touchstart",H).unbind("touchmove",N).unbind("touchend",J).unbind("scroll",w));var l=a(this),f=a.data(this,u);f&&(f[b]=!1);l.unbind(e,U);T(this)||l.removeData(u)}}}var u="virtualMouseBindings",x="virtualTouchID";c="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" ");var A="clientX clientY pageX pageY screenX screenY".split(" "),B=a.event.props.concat(a.event.mouseHooks?a.event.mouseHooks.props:
[]),D={},P=0,R=0,Y=0,O=!1,V=[],W=!1,F=!1,S="addEventListener"in d,Q=a(d),K=1,h=0,g;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var m=0;m<c.length;m++)a.event.special[c[m]]=E(c[m]);S&&d.addEventListener("click",function(b){var e=V.length,l=b.target,f,p,z;if(e){var y=b.clientX;var M=b.clientY;g=a.vmouse.clickDistanceThreshold;for(f=l;f;){for(p=0;p<e;p++)if(z=V[p],f===l&&Math.abs(z.x-y)<g&&Math.abs(z.y-M)<g||a.data(f,x)===z.touchID){b.preventDefault();b.stopPropagation();
return}f=f.parentNode}}},!0)})(jQuery,t,ba);ba.addEventListener("click",function(a){try{var c=function(E){return n&&E.getAttribute("data-sort-alt")||E.getAttribute("data-sort")||E.innerText},d=function(E,u){E.className=E.className.replace(q,"")+u},k=function(E,u){return E.nodeName===u?E:k(E.parentNode,u)},q=/ dir-(u|d) /,n=a.shiftKey||a.altKey,v=k(a.target,"TH"),r=k(v,"TR"),C=k(r,"TABLE");if(/\bsortable\b/.test(C.className)){var H,w=r.cells;for(a=0;a<w.length;a++)w[a]===v?H=v.getAttribute("data-sort-col")||
a:d(w[a],"");w=" dir-d ";if(-1!==v.className.indexOf(" dir-d ")||-1!==C.className.indexOf("asc")&&-1==v.className.indexOf(" dir-u "))w=" dir-u ";d(v,w);var N=C.tBodies[0],J=[].slice.call(N.rows,0),T=" dir-u "===w;J.sort(function(E,u){var x=c((T?E:u).cells[H]),A=c((T?u:E).cells[H]);return isNaN(x-A)?x.localeCompare(A):x-A});for(var U=N.cloneNode();J.length;)U.appendChild(J.splice(0,1)[0]);C.replaceChild(U,N)}}catch(E){}});Sa()})(window,document,$w,$d);
