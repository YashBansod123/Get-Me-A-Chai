var adContainer=document.querySelector(".adContainer"),startTime=null,totalFrames=10,currentFrameId=1;async function init(){await load(),await injectOptimizations(),await setReady()}async function injectOptimizations(){var e=document.querySelector(".frame2 #text-legal");if(document.querySelector(".frame3 #text-legal").innerHTML=e.innerHTML,"EnUk"!==conceptName){var t=document.querySelector(".frame6 #text-legal");document.querySelector(".frame7 #text-legal").innerHTML=t.innerHTML}if("EnSg"===conceptName){var n=document.querySelector(".frame10"),r=document.createElement("img");r.src="./frame10-legal.png",r.classList.add("legalImage"),n.appendChild(r);var a=document.createElement("img");a.src="./frame10-legal-2.png",a.classList.add("legalImage2"),n.appendChild(a)}if("EnUk"===conceptName){var o=(n=document.querySelector(".frame10")).querySelector("#atol-logo"),i=o?.querySelector("rect");if(o&&i){var s=i.getAttribute("x"),m=i.getAttribute("y"),c=i.getAttribute("width"),l=i.getAttribute("height");o.innerHTML=`<image href="./frame10-atol.png" x="${s}" y="${m}" width="${c}" height="${l}"/>`}}}async function load(){}async function setReady(){startTime=Date.now(),adContainer.classList.add("ready"),await sleep(1),window.showFrame(currentFrameId)}function indexElements(e,t,n=!0){var r=Array.from(e.querySelectorAll(t));return n&&(r=r.reverse()),r.forEach(((e,t)=>{e.style.setProperty("--itemIndex",t),e.style.setProperty("--totalItems",r.length)})),r}function onAnimationEnd(e,t=()=>{}){var n=r=>{r.target===e&&(t(r),e?.removeEventListener("animationend",n),e?.removeEventListener("transitionend",n))};e?.addEventListener("animationend",n,!1),e?.addEventListener("transitionend",n,!1)}function setMaskDimensions(e){var t=e?.querySelector("#mask");e?.style.setProperty("--maskWidth",`${t?.getAttribute("width")}px`),e?.style.setProperty("--maskHeight",`${t?.getAttribute("height")}px`),e?.style.setProperty("--maskX",`${t?.getAttribute("x")}px`),e?.style.setProperty("--maskY",`${t?.getAttribute("y")}px`)}function injectSvgImage(e){var t=e?.querySelector("img"),n=e?.querySelector("svg #img"),r=n?.querySelector("rect");n&&(n.innerHTML=`\n      ${n.innerHTML}\n      <image\n        href="${t?.getAttribute("src")}"\n        height="${r?.getAttribute("height")}"\n        width="${r?.getAttribute("width")}"\n      />\n    `)}function nextFrame(e=!1){e&&hideCurrentFrame();var t=currentFrameId+1;t>totalFrames&&(t=1),showFrame(t),currentFrameId=t}function prevFrame(e=!1){e&&hideCurrentFrame();var t=currentFrameId-1;t<1&&(t=totalFrames),showFrame(t),currentFrameId=t}function showFrame(e,t=!1){t&&hideCurrentFrame();var n=adContainer.querySelector(`.frame${e}`);window[`showFrame${e}`]&&window[`showFrame${e}`](n),n?.classList.add("visible"),currentFrameId=e,forceRedraw(n)}function forceRedraw(e){e&&e.offsetWidth,e&&e.width}function hideCurrentFrame(){hideFrame(currentFrameId)}function hideFrame(e){try{var t=adContainer.querySelector(`.frame${e}`);t&&(t.className=`frame frame${e}`)}catch(t){console.error(`Could not hide frame ${e}`)}}function sleep(e){return new Promise((t=>setTimeout(t,e)))}function log(e={}){return"string"==typeof e&&(e={message:e}),console.info({...e,timePassed:getTime()})}function getTime(){return Date.now()-startTime}function showFrame1(e){log({showFrame1:!0}),indexElements(e,".frameSvg #text > g"),injectSvgImage(e),setMaskDimensions(e),onAnimationEnd(e.querySelector(".frameMask"),nextFrame)}function showFrame2(e){log({showFrame2:!0}),onAnimationEnd(e.querySelector("#pill"),nextFrame)}function showFrame3(e){log({showFrame3:!0}),indexElements(e,"#text > g"),indexElements(e,"#text #drop path"),onAnimationEnd(e.querySelector("#text #drop path:last-child"),nextFrame)}function showFrame4(e){log({showFrame4:!0}),onAnimationEnd(e.querySelector("img"),nextFrame)}function showFrame5(e){log({showFrame5:!0}),onAnimationEnd(e.querySelector("#coin-container"),nextFrame)}function showFrame6(e){log({showFrame6:!0}),indexElements(e,"#flight > path",!1),indexElements(e,"#hotel > path"),setTimeout((()=>{e.classList.add("outro"),onAnimationEnd(e.querySelector("#pill rect"),nextFrame)}),800)}function showFrame7(e){log({showFrame7:!0});var t=e.querySelector("#coin-container");onAnimationEnd(t,(()=>{e.classList.add("outro"),onAnimationEnd(t,nextFrame)}))}function showFrame8(e){log({showFrame8:!0}),indexElements(e,"#text1 > g"),indexElements(e,"#text2 > g",!1);var t=e.querySelector("#coin");onAnimationEnd(t,(async()=>{await sleep(300),e.classList.add("showText1"),onAnimationEnd(t,(async()=>{await sleep(350),e.classList.add("showText2"),onAnimationEnd(t,(async()=>{await sleep(300),e.classList.add("outro"),onAnimationEnd(e.querySelector("#text2"),nextFrame)}))}))}))}async function showFrame9(e){log({showFrame9:!0}),indexElements(e,"#words > g"),await sleep(900),e.classList.add("outro"),onAnimationEnd(e.querySelector("#words"),nextFrame)}function showFrame10(e){log({showFrame10:!0}),setMaskDimensions(e);var t=e.querySelector(".frameMask");forceRedraw(t),onAnimationEnd(t,(()=>{t.style.visibility="hidden"})),onAnimationEnd(e.querySelector(".frameImg"),(()=>{log({adComplete:!0})}))}init();